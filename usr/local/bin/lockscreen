#!/bin/bash

# lockscreen script using ffmpeg and i3lock-color

TMPBG=/tmp/screen.png
LOCK=$HOME/.config/lockscreen/lock.png
RES=$(xrandr | grep "current" | awk '{print $8a"x"$10a}' | sed 's/,$//')
RESW=$(xrandr | grep "current" | awk '{print $8a}' | sed 's/,$//')
RESV=$(xrandr | grep "current" | awk '{print $10a}' | sed 's/,$//')

ffmpeg -f x11grab -video_size $RES -y -i $DISPLAY -filter_complex "smartblur=5:1,hue=s=1" -vframes 1 $TMPBG
i3lock -S=0 -n -u -i $TMPBG --timepos='x+60:h-120' --datepos='tx:h-75' --clock --timestr="%H:%M:%S" --date-align 1 --datestr "Type password to unlock..." --time-align=1 --date-align=1 --time-font="Inter Extra Bold" --timesize=72 --date-font="Inter Semi Bold" --datesize=36 --timecolor=ffffffff --datecolor=ffffffff
rm $TMPBG
